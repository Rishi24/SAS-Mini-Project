<<<<<<< HEAD
really good video to learn about GITHUBâ€”>http://www.youtube.com/watch?v=0fKg7e37bQE



/* Authors: Amanda McDermott, Ian Clark, Rishi Saxena */



PROC IMPORT OUT= WORK.US_FA_raw 
            DATAFILE= "J:\SAS PROJECT\us_foreign_assistance.txt" 
            DBMS=TAB REPLACE;
     GETNAMES=YES;
     DATAROW=2; 
     GUESSINGROWS=10000; 
RUN;  * this is from using the important wizards... I think it has trouble with reading the date but lets fix it later;

data US_Fa_raw;
set US_Fa_raw;
fiscal_year_num=input(fiscal_year,4.);
drop fiscal_year;
run;



*part 2;

*a;

PROC SQL PRINT; 
SELECT count(distinct Program_name) AS CNT_Program
FROM Us_Fa_raw;
QUIT; *22 unique values exist for program name;


*b;
proc sql print OUTOBS=10;
Create Table Counts As
	   Select count(distinct Program_name) AS CNT_Program,
       recipient_country AS  recipient_country
From Us_fa_raw
GROUP by recipient_country
order by CNT_program Desc;
QUIT;


*C;
proc means data=us_fa_raw NOPRINT ;
where Fiscal_year_num > 2010;
var Obligations___US_;
class Program_name;
output OUT=Funding sum(Obligations___US_)= total_funding;
run;

data funding;
set funding;
if _type_= 0 then delete;
run;


proc sort data=funding;
by descending total_funding;
run;

proc print data=funding (obs=3);
var program_name Total_funding;
run;

*D;


data Fiscal_TS;
set Us_fa_raw;
where Recipient_country in ("Asia (not specified)"  "Middle East & North Afric") and Unit_Name= ("Constant 2011 $US");
Keep Recipient_country Unit_name Obligations___US_ FISCAL_year_num;
by fiscal_year_num;
run;  



proc sgpanel data=fiscal_ts;
panelby Recipient_country;
series x=fiscal_year_num y=Obligations___US_;
label Obligations___US_= "Obligations in 2011 $US" fiscal_year_num="fiscal Year";
title "Funding Obligation over time";
Title2 "By region";
run;





*Part 3;
DATA Economic;
	SET US_Fa_raw;
	WHERE (Assistance_Type = 'Economic') and (Unit_Name = 'Constant 2011 $US');
RUN;


DATA Military;
	SET US_Fa_raw;
	WHERE (Assistance_Type = 'Military') and (Unit_Name = 'Constant 2011 $US');
RUN;


DATA Economic2;
	SET economic;
	/*IF fiscal_year_num <= 1960 then delete;*/
	/*ELSE IF fiscal_year_num in (1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970) then*/ dec61_70=obligations___Us_;
	/*Else IF fiscal_year_num in (1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980) then*/ dec71_80=obligations___Us_;
	/*Else IF fiscal_year_num in (1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990) then*/ dec81_90=obligations___Us_;
	/*Else IF fiscal_year_num in (1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000) then*/ dec91_00=obligations___Us_;
	/*ELSE if fiscal_year_num in (2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010) then*/ dec01_10=obligations___Us_;
	/*ELSE delete;*/
RUN;

***********************************************************
* STEP 6;

/* a */
FILENAME wdicount "J:\WDI_Country.csv";
PROC IMPORT OUT = WDI_Country (keep=Country_Code Region Short_Name)
            DATAFILE = wdicount
            DBMS = CSV REPLACE;
     GUESSINGROWS = 300; 
RUN;

PROC PRINT DATA = WDI_Country;
	TITLE "Checking WDI Country Data";
RUN;

/* b */
FILENAME wdidat "J:\WDI_Data.csv";
PROC IMPORT OUT = WDI_Data_Main
			DATAFILE = wdidat
			DBMS = CSV REPLACE;
	GETNAMES = YES;
    DATAROW = 2; 
	GUESSINGROWS = 10000;
RUN;

DATA WDI_Data_Clean;
	SET WDI_Data_Main;
	IF Indicator_Code = "SP.DYN.LE00.IN" THEN OUTPUT;
RUN;

DATA WDI_Data (drop=Country_Name Indicator_Name Indicator_Code);
	SET WDI_Data_Clean;
RUN;

PROC PRINT DATA = WDI_Data;
	TITLE "Checking WDI Data";
RUN;

* STEP 7;
PROC SORT DATA = WDI_Data;
	BY Country_Code;
RUN;

PROC MEANS NOPRINT DATA = WDI_LifeEx;
	BY Country_Code;
	OUTPUT OUT = WDI_LifeMeans
		MEAN(_1961 _1962 _1963 _1964 _1965 _1966 _1967 _1968 _1969 _1970) = _1961M _1962M _1963M _1964M _1965M _1966M _1967M _1968M _1969M _1970M
		MEAN(_1971 _1972 _1973 _1974 _1975 _1976 _1977 _1978 _1979 _1980) = _1971M _1972M _1973M _1974M _1975M _1976M _1977M _1978M _1979M _1980M
		MEAN(_1981 _1982 _1983 _1984 _1985 _1986 _1987 _1988 _1989 _1990) = _1981M _1982M _1983M _1984M _1985M _1986M _1987M _1988M _1989M _1990M
		MEAN(_1991 _1992 _1993 _1994 _1995 _1996 _1997 _1998 _1999 _2000) = _1991M _1992M _1993M _1994M _1995M _1996M _1997M _1998M _1999M _2000M
		MEAN(_2001 _2002 _2003 _2004 _2005 _2006 _2007 _2008 _2009 _2010) = _2001M _2002M _2003M _2004M _2005M _2006M _2007M _2008M _2009M _2010M;
RUN;

PROC SORT DATA = WDI_LifeMeans;
	BY Country_Code;
RUN;

DATA 
DATA WDI_Data (keep=Country_Code AvgLifeEx1961_1970 AvgLifeEx1971_1980 AvgLifeEx1981_1990 AvgLifeEx1991_2000 AvgLifeEx2001_2010);
	SET WDI_LifeExDec;
	
RUN;

PROC PRINT DATA = WDI_Data;
	TITLE "WDI Data with Average Life Expectancy Values Per Decade";
RUN;

* STEP 8;
PROC SORT DATA = WDI_Data;
	BY Country_Code;
RUN;

PROC SORT DATA = WDI_Country;
	BY Country_Code;
RUN;

DATA WDI;
	MERGE WDI_Data WDI_Country;
	BY Country_Code;
RUN;

PROC PRINT DATA = WDI;
	TITLE "WDI Merged Data";
RUN;
